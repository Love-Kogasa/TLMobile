<!doctype>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="css/picnic.css">
    <link rel="stylesheet" href="css/index.css">
    <title>TLMobile - 一切为了Terraria手机MOD玩家</title>
    <script src="js/moddata.js"></script>
    <script>
      window.onload = async () => {
        var mdd = await loadMod()
        var url = new URL( window.location.href ).searchParams
        if( url.has( "id" )){
          var mod = mdd.json[url.get("id")]
          n.textContent = mod.name
          description.textContent = mod.description
          info.innerHTML = `适用于 ${mod.engine}<br>相关链接: <a href="${mod.link}">点我访问</a><br>Mod作者: ${mod.writer}`
          download.href = mod.file || "javascript:alert('暂无')"
        } else {
          window.location.href = "./index.html"
        }
        modsearch.oninput = () => {
          mods.innerHTML = ""
          for( let mod of mdd.search( modsearch.value )){
            mods.innerHTML += mod.html()
          }
        }
        modsearch.oninput()
      }
    </script>
  </head>
  <body>
    <nav class="demo imponent">
      <a href="./index.html" class="brand">
         <img src="imgs/logo.png" class="logo">
        <span>TLMobile</span>
      </a>
      <input id="bmenug" type="checkbox" class="show">
      <label for="bmenug" class="burger pseudo button">&#8801;</label>
      <div class="menu" style="padding: 5px;">
        <input placeholder="搜索模组" id="modsearch"/>
        <div id="mods">
        </div>
      </div>
    </nav><br>
    <div class="container">
      <h2 id="n">MOD NAME</h2>
      <p id="info">适用于: tmodloader<br>相关链接: <a>Link</a></br>Mod作者: xxx</p>
      <pre id="description">Mod description</pre>
      <a class="button" id="download">下载Mod</a>
    </div>
  </body>
</html>